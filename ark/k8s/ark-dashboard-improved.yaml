apiVersion: v1
kind: ConfigMap
metadata:
  name: ark-dashboard-html
  namespace: default
data:
  index.html: |
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>ARK Dashboard</title>
      <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          min-height: 100vh;
          padding: 20px;
        }
        .container {
          max-width: 1200px;
          margin: 0 auto;
        }
        .header {
          background: rgba(255, 255, 255, 0.95);
          backdrop-filter: blur(10px);
          padding: 30px;
          border-radius: 20px;
          margin-bottom: 30px;
          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }
        h1 {
          font-size: 2.5em;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          margin-bottom: 10px;
        }
        .subtitle {
          color: #666;
          font-size: 1.1em;
        }
        .grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
          gap: 20px;
          margin-bottom: 30px;
        }
        .card {
          background: rgba(255, 255, 255, 0.95);
          backdrop-filter: blur(10px);
          padding: 25px;
          border-radius: 15px;
          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
          transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
          transform: translateY(-5px);
          box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
        }
        .card-title {
          font-size: 1.3em;
          font-weight: bold;
          margin-bottom: 15px;
          color: #333;
          display: flex;
          align-items: center;
          gap: 10px;
        }
        .status-indicator {
          width: 12px;
          height: 12px;
          border-radius: 50%;
          display: inline-block;
          animation: pulse 2s infinite;
        }
        .status-healthy { background: #10b981; }
        .status-warning { background: #f59e0b; }
        .status-error { background: #ef4444; }
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
        .agent-list {
          list-style: none;
        }
        .agent-item {
          padding: 15px;
          margin: 10px 0;
          background: linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%);
          border-radius: 10px;
          display: flex;
          justify-content: space-between;
          align-items: center;
          transition: all 0.3s ease;
        }
        .agent-item:hover {
          transform: translateX(5px);
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        .agent-name {
          font-weight: bold;
          color: #333;
          font-size: 1.1em;
        }
        .agent-desc {
          color: #666;
          font-size: 0.9em;
          margin-top: 5px;
        }
        .badge {
          padding: 5px 15px;
          border-radius: 20px;
          font-size: 0.85em;
          font-weight: bold;
        }
        .badge-success {
          background: #10b981;
          color: white;
        }
        .badge-info {
          background: #3b82f6;
          color: white;
        }
        .stats {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 15px;
          margin-top: 20px;
        }
        .stat-box {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          padding: 20px;
          border-radius: 10px;
          text-align: center;
        }
        .stat-number {
          font-size: 2.5em;
          font-weight: bold;
          margin-bottom: 5px;
        }
        .stat-label {
          font-size: 0.9em;
          opacity: 0.9;
        }
        .refresh-btn {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          border: none;
          padding: 12px 30px;
          border-radius: 25px;
          font-size: 1em;
          cursor: pointer;
          transition: all 0.3s ease;
          box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        .refresh-btn:hover {
          transform: scale(1.05);
          box-shadow: 0 8px 20px rgba(102, 126, 234, 0.6);
        }
        .info-text {
          color: #666;
          font-size: 0.95em;
          line-height: 1.6;
        }
        .link {
          color: #667eea;
          text-decoration: none;
          font-weight: bold;
        }
        .link:hover {
          text-decoration: underline;
        }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="header">
          <h1>ü§ñ ARK Dashboard</h1>
          <p class="subtitle">Agent Runtime Kernel - Kubernetes Edition</p>
        </div>

        <div class="grid">
          <!-- System Status -->
          <div class="card">
            <div class="card-title">
              <span class="status-indicator status-healthy"></span>
              System Status
            </div>
            <div class="stats">
              <div class="stat-box">
                <div class="stat-number" id="agent-count">5</div>
                <div class="stat-label">Active Agents</div>
              </div>
              <div class="stat-box">
                <div class="stat-number" id="pod-count">2</div>
                <div class="stat-label">Running Pods</div>
              </div>
            </div>
            <div style="margin-top: 20px; text-align: center;">
              <button class="refresh-btn" onclick="refreshStatus()">üîÑ Refresh Status</button>
            </div>
          </div>

          <!-- ARK API Status -->
          <div class="card">
            <div class="card-title">
              <span class="status-indicator status-healthy" id="api-status"></span>
              ARK API
            </div>
            <p class="info-text">
              <strong>Endpoint:</strong> <a href="http://localhost:8080/health" target="_blank" class="link">http://localhost:8080</a><br><br>
              <strong>Status:</strong> <span id="api-health">Checking...</span><br>
              <strong>Service:</strong> <span id="api-service">Mock ARK</span><br>
              <strong>Namespace:</strong> default<br>
              <strong>Type:</strong> Claude-powered mock service
            </p>
          </div>
        </div>

        <!-- Deployed Agents -->
        <div class="card">
          <div class="card-title">
            üìã Deployed Agents
          </div>
          <ul class="agent-list">
            <li class="agent-item">
              <div>
                <div class="agent-name">üìä code-analyzer</div>
                <div class="agent-desc">Analyzes source code (Java, C#, TypeScript) and extracts entities, services, and APIs</div>
              </div>
              <span class="badge badge-success">Active</span>
            </li>
            <li class="agent-item">
              <div>
                <div class="agent-name">üìã migration-planner</div>
                <div class="agent-desc">Plans microservices decomposition and defines service boundaries</div>
              </div>
              <span class="badge badge-success">Active</span>
            </li>
            <li class="agent-item">
              <div>
                <div class="agent-name">‚öôÔ∏è service-generator</div>
                <div class="agent-desc">Generates Spring Boot microservices with full implementation</div>
              </div>
              <span class="badge badge-success">Active</span>
            </li>
            <li class="agent-item">
              <div>
                <div class="agent-name">üé® frontend-migrator</div>
                <div class="agent-desc">Generates Angular micro-frontends from legacy UI</div>
              </div>
              <span class="badge badge-success">Active</span>
            </li>
            <li class="agent-item">
              <div>
                <div class="agent-name">‚úÖ quality-validator</div>
                <div class="agent-desc">Validates generated code, builds, and functional equivalence</div>
              </div>
              <span class="badge badge-success">Active</span>
            </li>
          </ul>
        </div>

        <!-- Quick Links -->
        <div class="card">
          <div class="card-title">
            üîó Quick Links
          </div>
          <p class="info-text">
            <strong>Platform Frontend:</strong> <a href="http://localhost:3000" target="_blank" class="link">http://localhost:3000</a><br>
            <strong>Backend API:</strong> <a href="http://localhost:4000/health" target="_blank" class="link">http://localhost:4000</a><br>
            <strong>ARK API:</strong> <a href="http://localhost:8080/health" target="_blank" class="link">http://localhost:8080</a><br>
            <strong>ARK Dashboard:</strong> <a href="http://localhost:3001" target="_blank" class="link">http://localhost:3001</a> (this page)
          </p>
        </div>
      </div>

      <script>
        async function checkAPIHealth() {
          try {
            const response = await fetch('http://localhost:8080/health');
            const data = await response.json();
            document.getElementById('api-health').textContent = data.status || 'Unknown';
            document.getElementById('api-service').textContent = data.service || 'Unknown';
            document.getElementById('api-status').className = 'status-indicator status-healthy';
          } catch (error) {
            document.getElementById('api-health').textContent = 'Unreachable';
            document.getElementById('api-status').className = 'status-indicator status-error';
          }
        }

        function refreshStatus() {
          checkAPIHealth();
          const btn = event.target;
          btn.textContent = 'üîÑ Refreshing...';
          setTimeout(() => {
            btn.textContent = 'üîÑ Refresh Status';
          }, 1000);
        }

        // Check API health on load
        checkAPIHealth();

        // Auto-refresh every 30 seconds
        setInterval(checkAPIHealth, 30000);
      </script>
    </body>
    </html>
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ark-dashboard
  namespace: default
  labels:
    app: ark-dashboard
spec:
  replicas: 1
  selector:
    matchLabels:
      app: ark-dashboard
  template:
    metadata:
      labels:
        app: ark-dashboard
    spec:
      containers:
      - name: dashboard
        image: nginx:alpine
        ports:
        - containerPort: 3000
        volumeMounts:
        - name: dashboard-html
          mountPath: /usr/share/nginx/html
        - name: nginx-config
          mountPath: /etc/nginx/conf.d/default.conf
          subPath: default.conf
      volumes:
      - name: dashboard-html
        configMap:
          name: ark-dashboard-html
      - name: nginx-config
        configMap:
          name: nginx-dashboard-config
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: nginx-dashboard-config
  namespace: default
data:
  default.conf: |
    server {
        listen 3000;
        server_name localhost;
        root /usr/share/nginx/html;
        index index.html;

        location / {
            try_files $uri $uri/ /index.html;
        }

        # Enable CORS for API calls
        location /api/ {
            add_header 'Access-Control-Allow-Origin' '*' always;
            add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS' always;
            add_header 'Access-Control-Allow-Headers' 'Content-Type' always;
        }
    }
